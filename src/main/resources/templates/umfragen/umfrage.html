<html layout:decorate="~{layout/layout}">

<head>
<title>Umfrage ansehen</title>
</head>

<body layout:fragment="content">
	<div>
		<a href="/umfragen" class="btn btn-link"> <i
			class="fas fa-arrow-left mr-1"></i>Umfragen
		</a>
	</div>

	<div class="card w-80 my-2">
		<div class="card-img-top">
			<div id="map" class="w-100" style="height: 400px;"></div>
			<input type="hidden" id="longitude" th:value="${umfrage.laengengrad}">
			<input type="hidden" id="latitude" th:value="${umfrage.breitengrad}">

			<script th:inline="javascript">
				window.document.showMap = true;
			</script>
		</div>
		<div class="card-body">
			<h4 class="card-title" th:text="${umfrage.titel}"></h4>

			<div class="row">
				<div class="col border-right">
					<!-- Erstellt am -->
					<div class="row py-1">
						<span class="col-4 text-right">Erstellt am: </span> <span
							class="col-8" th:text="${umfrage.createdAt}"></span>
					</div>
					<!-- Bearbeitet am -->
					<div class="row py-1" th:if="${umfrage.updatedAt != null}">
						<span class="col-4 text-right">Bearbeitet am: </span> <span
							class="col-8" th:text="${umfrage.updatedAt}"></span>
					</div>

					<div class="row py-1">
						<span class="col-4 text-right">Kategorie: </span> <span
							class="col-8" th:text="${umfrage.kategorie}"></span>
					</div>

					<div class="row py-1">
						<span class="col-4 text-right">Startdatum: </span> <span
							class="col-8" th:text="${umfrage.startDatum}"></span>
					</div>

					<div class="row py-1">
						<span class="col-4 text-right">Enddatum: </span> <span
							class="col-8" th:text="${umfrage.endDatum}"></span>
					</div>

					<div class="row py-1">
						<span class="col-4 text-right">Best√§tigungs-Schwellenwert:
						</span> <span class="col-8"
							th:text="${umfrage.bestaetigungsSchwellenwert}"></span>
					</div>
				</div>
				<div class="col">
					<div class="border rounded p-2 mb-2"
						th:each="frage : ${umfrage.fragen}">
						<div class="py-1">
							<h5 th:text="${frage.titel}"></h5>
						</div>
						<!-- Die Antworten -->
						<div class="py-1" th:each="antwort : ${frage.antworten}">
							<span th:text="${antwort}"></span>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="card-body">
			<div class="py-1">
				<a class="btn btn-primary w-100"
					th:href="@{'/umfragen/' + ${umfrage.id} + '/edit'}">Bearbeiten</a>
			</div>
			<div class="py-1">
				<a th:unless="${umfrage.isDisabled}" class="btn btn-danger w-100"
					th:href="@{'/umfragen/' + ${umfrage.id} + '/disable'}">Deaktivieren</a>
				<a th:if="${umfrage.isDisabled}" class="btn btn-success w-100"
					th:href="@{'/umfragen/' + ${umfrage.id} + '/enable'}">Aktivieren</a>
			</div>
		</div>
	</div>
</body>
</html>